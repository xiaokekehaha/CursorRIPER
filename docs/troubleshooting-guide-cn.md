![CursorRIPER](../res/github-header.png)
# CursorRIPER 框架 - 故障排除指南

本指南帮助您识别和解决使用CursorRIPER框架时可能出现的常见问题。无论您遇到的是设置问题、工作流程中断还是意外行为，都可以在这里找到诊断步骤和解决方案。

## 目录

1. [安装和设置问题](#安装和设置问题)
2. [文件扩展名问题](#文件扩展名问题)
3. [状态管理问题](#状态管理问题)
4. [内存库问题](#内存库问题)
5. [工作流程中断](#工作流程中断)
6. [Cursor IDE集成](#cursor-ide集成)
7. [自定义挑战](#自定义挑战)
8. [恢复程序](#恢复程序)
9. [性能考虑](#性能考虑)

## 安装和设置问题

### 找不到框架文件

**症状:**
- AI无法识别CursorRIPER命令
- 关于缺少框架文件的错误消息
- AI在响应中不确认框架

**可能原因:**
- 文件未复制到正确位置
- 文件名称或扩展名不正确
- Cursor未识别框架文件

**解决方案:**
1. 验证文件存在于`.cursor/rules/`目录中
2. 确保所有框架文件具有`.mdc`扩展名（不是`.md`）
3. 检查文件权限
4. 重启Cursor IDE以重新加载框架文件

### 框架未初始化

**症状:**
- `/start`命令不触发START阶段
- 没有确认框架初始化

**可能原因:**
- 核心文件缺失或损坏
- 文件路径不正确
- 与其他Cursor规则冲突

**解决方案:**
1. 验证core.mdc和state.mdc存在且格式正确
2. 检查控制台是否有错误消息
3. 尝试手动设置state.mdc为`PROJECT_PHASE: "UNINITIATED"`
4. 从源重新安装框架文件

## 文件扩展名问题

### GitHub仓库 vs 项目文件

**重要提示:** 在GitHub仓库中，框架文件使用`.md`扩展名以在GitHub上正确呈现。在项目中实施时，这些文件必须重命名为使用`.mdc`扩展名。

**症状:**
- 框架加载不正确
- AI无法识别框架命令
- AI响应中没有模式声明

**解决方案:**
1. 从GitHub下载框架文件
2. 将所有框架规则文件从`.md`重命名为`.mdc`：
   ```bash
   # Linux/macOS
   cd .cursor/rules/
   for file in *.md; do mv "$file" "${file%.md}.mdc"; done
   
   # Windows PowerShell
   Get-ChildItem -Path ".cursor\rules" -Filter "*.md" | Rename-Item -NewName { $_.Name -replace '.md','.mdc' }
   ```
3. 保持`memory-bank/`目录中的文件为`.md`扩展名
4. 重启Cursor IDE

### 需要重命名的文件

这些文件必须从`.md`重命名为`.mdc`：
- `core.md` → `core.mdc`
- `state.md` → `state.mdc`
- `start-phase.md` → `start-phase.mdc`
- `riper-workflow.md` → `riper-workflow.mdc`
- `customization.md` → `customization.mdc`

## 状态管理问题

### 模式或阶段不正确

**症状:**
- AI使用错误的模式声明
- 命令不触发模式更改
- 会话间行为不一致

**可能原因:**
- state.mdc文件损坏
- 模式转换不完整
- 文件保存问题

**解决方案:**
1. 检查state.mdc文件以查看当前值
2. 手动更新状态值为正确设置：
   ```
   PROJECT_PHASE: "DEVELOPMENT"
   RIPER_CURRENT_MODE: "RESEARCH"
   ```
3. 重置框架状态：
   ```
   请将框架状态重置为DEVELOPMENT阶段和RESEARCH模式。
   ```

### 重新初始化问题

**症状:**
- 无法重新启动项目
- 先前初始化后不识别"/start"命令
- 关于重新初始化的错误消息

**可能原因:**
- 框架防止意外重新初始化
- 状态文件损坏
- 缺少确认

**解决方案:**
1. 使用明确的重新初始化确认：
   ```
   /start
   CONFIRM RE-INITIALIZATION
   ```
2. 如果仍然失败，手动编辑state.mdc：
   ```
   PROJECT_PHASE: "UNINITIATED"
   START_PHASE_STATUS: "NOT_STARTED"
   ```
3. 如果需要，删除并重新安装框架文件

## 内存库问题

### 内存文件缺失或损坏

**症状:**
- AI缺乏项目上下文
- 关于缺少内存文件的错误消息
- 不完整或无意义的响应

**可能原因:**
- 文件被删除或移动
- 不当更新导致文件损坏
- 权限问题阻止保存

**解决方案:**
1. 检查文件是否存在于memory-bank目录中
2. 如果有备份，从备份恢复：
   ```
   memory-bank/backups/[date]/
   ```
3. 如果没有备份，请求AI重新创建基本内存文件：
   ```
   请根据我们当前的项目状态重新创建缺失的内存库文件。
   ```

### 信息不一致

**症状:**
- AI给出矛盾的响应
- 引用过时或不正确的信息
- 对项目需求或状态的混淆

**可能原因:**
- 内存文件更新不一致
- 多个团队成员进行不协调的更改
- 格式错误的手动编辑

**解决方案:**
1. 审查所有内存文件的一致性
2. 更新所有文件中的时间戳和版本
3. 请求AI协调不一致性：
   ```
   请审查所有内存文件并协调项目信息中的任何不一致性。
   ```
4. 对于严重问题，考虑完整的内存库刷新

## 工作流程中断

### 不遵循模式约束

**症状:**
- AI在RESEARCH模式中提出建议
- 在PLAN模式中实施代码
- 在EXECUTE模式中不遵循批准的计划

**可能原因:**
- 模式声明不正确
- 状态文件不一致
- AI上下文限制

**解决方案:**
1. 明确强化模式约束：
   ```
   您处于RESEARCH模式。请只收集信息和提出问题。
   ```
2. 重启聊天会话以刷新AI上下文
3. 验证state.mdc显示正确模式
4. 如果可用，使用Cursor的自定义模式

### PLAN模式清单问题

**症状:**
- 没有生成清单
- 不完整或模糊的清单项目
- 清单不反映完整的实施需求

**可能原因:**
- 提供的信息不足
- 复杂需求未完全阐明
- AI上下文限制

**解决方案:**
1. 明确请求详细清单：
   ```
   请生成一个全面的、编号的实施清单，包含具体的、可操作的步骤。
   ```
2. 提供更详细的需求
3. 将复杂功能分解为更小的组件
4. 在customization.mdc中调整PLAN_QUESTION_COUNT

### EXECUTE模式实施问题

**症状:**
- AI偏离批准的计划
- 实施不完整
- 实施过程中的错误

**可能原因:**
- 计划不够详细
- 未预期的技术挑战
- 计划步骤中的歧义

**解决方案:**
1. 如果需要偏离，返回PLAN模式：
   ```
   /plan
   我们需要修改计划以处理这个意外问题。
   ```
2. 创建更详细的实施清单
3. 遇到问题时更新progress.md
4. 将复杂实施分解为更小的步骤

## Cursor IDE集成

### 无法识别MDC文件

**症状:**
- 框架未加载
- 规则未出现在Cursor设置中
- 没有观察到框架行为

**可能原因:**
- 文件位置不正确
- 文件格式不正确
- Cursor IDE版本不兼容

**解决方案:**
1. 确保文件在`.cursor/rules/`目录中
2. 验证文件具有`.mdc`扩展名
3. 检查Cursor文档以了解当前规则格式
4. 重启Cursor IDE
5. 将Cursor更新到最新版本

### 命令识别失败

**症状:**
- `/research`等命令不触发模式更改
- AI不响应框架命令
- 命令识别不一致

**可能原因:**
- AI上下文限制
- 命令格式问题
- Cursor IDE版本差异

**解决方案:**
1. 尝试替代命令格式：
   - 如果`/research`失败，尝试`ENTER RESEARCH MODE`
2. 在消息中明确定义命令：
   ```
   我想切换到RESEARCH模式。请转换并开始在该模式下操作。
   ```
3. 重启聊天会话以刷新AI上下文
4. 检查customization.mdc中的自定义命令

## 自定义挑战

### 自定义未应用

**症状:**
- 尽管有自定义，默认行为仍然存在
- 没有确认自定义设置
- 不正确的详细程度或行为

**可能原因:**
- customization.mdc缺失或未加载
- 自定义文件中的语法错误
- 自定义设置在其他地方被覆盖

**解决方案:**
1. 验证customization.mdc存在于`.cursor/rules/`中
2. 检查语法错误或格式问题
3. 重启Cursor IDE以重新加载设置
4. 尝试明确的设置请求：
   ```
   请确认并应用customization.mdc中的我的自定义设置。
   ```

### 格式错误

**症状:**
- 与自定义相关的错误消息
- 框架以默认设置加载
- 意外行为

**可能原因:**
- customization.mdc中的语法无效
- 值类型不正确
- 缺少必需字段

**解决方案:**
1. 对照模板检查customization.mdc
2. 验证所有值使用正确的类型和格式
3. 删除有问题的设置以隔离问题
4. 从默认customization.mdc模板恢复

## 恢复程序

### 从备份恢复

如果您启用了自动备份（参见customization.mdc中的`BACKUP_FREQUENCY`），您可以从备份恢复：

1. 找到备份目录（通常是`memory-bank/backups/[date]/`）
2. 将所需的备份文件复制到主memory-bank目录
3. 如果需要，更新state.mdc
4. 重启Cursor IDE

### 手动状态重置

如果框架状态损坏：

1. 手动编辑state.mdc：
   ```
   PROJECT_PHASE: "DEVELOPMENT"
   RIPER_CURRENT_MODE: "RESEARCH"
   START_PHASE_STATUS: "COMPLETED"
   START_PHASE_STEP: 6
   LAST_UPDATE: "[ISO格式的当前日期]"
   ```
2. 重启Cursor IDE
3. 通知AI正确状态：
   ```
   框架状态已手动重置为DEVELOPMENT阶段和RESEARCH模式。
   ```

### 重建内存库

对于严重损坏或缺失的内存文件：

1. 为任何现有内存文件创建备份
2. 删除损坏的内存文件
3. 请求AI重建基本内存：
   ```
   请根据当前项目状态和您对我们迄今为止工作的了解重建我们的内存库文件。
   ```
4. 审查并补充生成的文件中缺失的信息

### 紧急回滚

如果发生破坏性代码更改：

1. 使用版本控制恢复更改：
   ```bash
   git checkout -- path/to/changed/files
   ```
2. 如果没有版本控制，检查编辑器中的自动备份
3. 更新内存文件以反映回滚：
   ```
   请更新内存库以反映我们已回滚对[功能/组件]的更改。
   ```

## 性能考虑

### AI响应缓慢

**症状:**
- AI响应延迟很长
- 响应不完整或截断
- AI似乎失去上下文

**可能原因:**
- 内存文件非常大
- 复杂的项目结构
- 资源限制

**解决方案:**
1. 通过专注于基本信息来减少内存文件的大小
2. 归档较旧的、不太相关的内容
3. 将大型内存文件拆分为组件部分
4. 重启Cursor IDE以清除内存

### 内存消耗问题

**症状:**
- Cursor IDE运行缓慢
- 高CPU或内存使用率
- 频繁冻结或崩溃

**可能原因:**
- 具有广泛索引的大型代码库
- 许多大型内存文件
- Cursor IDE资源限制

**解决方案:**
1. 使用.cursorignore文件排除非必要目录
2. 通过删除冗余信息来优化内存文件
3. 考虑使用额外资源运行Cursor
4. 定期重启Cursor IDE以清除内存

---

## 联系支持

如果在尝试这些故障排除步骤后仍然遇到问题：

1. 检查官方CursorRIPER存储库以获取更新和已知问题
2. 审查Cursor IDE文档以获取任何相关信息
3. 考虑在CursorRIPER GitHub存储库上发布问题

---

*CursorRIPER框架防止编码灾难，同时在会话间保持完美连续性。* 